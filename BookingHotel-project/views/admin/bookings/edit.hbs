<div class="max-w-4xl mx-auto">
  <div class="rounded-lg border border-gray-200 bg-white shadow-md">
    <div class="border-b border-gray-200 px-6 py-4">
      <h3 class="text-lg font-semibold text-gray-900">
        Chỉnh sửa đặt phòng
      </h3>
      <p class="text-sm text-gray-500">
        Cập nhật thông tin đặt phòng
      </p>
    </div>
<form
  action="/admin/bookings/edit/{{booking._id}}?_method=PUT"
  method="POST"
  class="px-6 py-6 space-y-6"
>
  <!-- Customer info -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Tên khách
      </label>
      <input
        type="text"
        name="guestName"
        value="{{#if booking.user}}{{booking.user.name}}{{else}}{{booking.guestName}}{{/if}}"
        required
        class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm"
      />
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Số điện thoại
      </label>
      <input
        type="text"
        name="guestPhone"
        value="{{#if booking.user}}{{booking.user.phone}}{{else}}{{booking.guestPhone}}{{/if}}"
        required
        class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm"
      />
    </div>

    <div class="md:col-span-2">
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Email
      </label>
      <input
        type="email"
        name="guestEmail"
        value="{{#if booking.user}}{{booking.user.email}}{{else}}{{booking.guestEmail}}{{/if}}"
        class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm"
      />
    </div>
  </div>

  <!-- Room & Guests -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Phòng
      </label>
      <select
        name="room"
        required
        class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm"
      >
        {{#each rooms}}
          <option value="{{_id}}" {{#if selected}}selected{{/if}}>
            Phòng {{roomNumber}}
          </option>
        {{/each}}
      </select>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Số khách
      </label>
      <input
        type="number"
        name="guests"
        min="1"
        value="{{booking.guests}}"
        required
        class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm"
      />
    </div>
  </div>

  <!-- Dates -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Nhận phòng
      </label>
      <input
        type="date"
        name="checkIn"
        value="{{booking.checkInFormatted}}"
        required
        class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm"
      />
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Trả phòng
      </label>
      <input
        type="date"
        name="checkOut"
        value="{{booking.checkOutFormatted}}"
        required
        class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm"
      />
    </div>
  </div>

  <!-- Price & Status -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Tổng tiền
      </label>
      <input
        type="number"
        name="totalPrice"
        value="{{booking.totalPrice}}"
        required
        class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm"
      />
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Trạng thái
      </label>
      <select
        name="status"
        class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm"
      >
        <option value="pending" {{#if booking.isPending}}selected{{/if}}>Chờ xử lý</option>
        <option value="confirmed" {{#if booking.isConfirmed}}selected{{/if}}>Đã xác nhận</option>
        <option value="cancelled" {{#if booking.isCancelled}}selected{{/if}}>Đã huỷ</option>
        <option value="checked_in" {{#if booking.isCheckedIn}}selected{{/if}}>Đã nhận phòng</option>
        <option value="checked_out" {{#if booking.isCheckedOut}}selected{{/if}}>Đã trả phòng</option>
      </select>
    </div>
  </div>

  <!-- Actions -->
  <div class="flex justify-end gap-3 pt-4 border-t border-gray-200">
    <a
      href="/admin/bookings"
      class="rounded-md border border-gray-300 px-4 py-2 text-sm font-medium
             text-gray-700 hover:bg-gray-100"
    >
      Huỷ
    </a>

    <button
      type="submit"
      class="rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold
             text-white hover:bg-blue-700"
    >
      Cập nhật đặt phòng
    </button>
  </div>
</form>

  </div>
</div>
